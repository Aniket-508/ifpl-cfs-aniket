# ========================================
# Shankh.ai Backend Environment Variables
# ========================================
# Copy this file to .env and fill in your actual values
# NEVER commit the .env file to version control!

# -----------------
# Server Configuration
# -----------------
NODE_ENV=development
PORT=4000
HOST=0.0.0.0

# -----------------
# LLM API Keys
# -----------------
# Primary LLM provider (Claude Sonnet)
CLAUDE_API_KEY=sk-ant-your-actual-claude-api-key-here

# Fallback LLM providers (optional but recommended)
OPENROUTER_API_KEY=sk-or-your-openrouter-api-key-here
GEMINI_API_KEY=your-google-gemini-api-key-here
DEEPSEEK_API_KEY=your-deepseek-api-key-here

# -----------------
# LLM Configuration
# -----------------
# Primary provider: claude | openrouter | gemini | deepseek
LLM_PROVIDER=claude

# Fallback provider if primary fails
LLM_FALLBACK=openrouter

# Model names (customize based on provider)
CLAUDE_MODEL=claude-sonnet-4-20250514
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet
GEMINI_MODEL=gemini-1.5-pro
DEEPSEEK_MODEL=deepseek-chat

# LLM parameters
LLM_MAX_TOKENS=2000
LLM_TEMPERATURE=0.7
LLM_TOP_P=0.9

# -----------------
# RAG Service
# -----------------
# URL to the Python RAG service
RAG_SERVICE_URL=http://localhost:8000

# RAG retrieval parameters
RAG_TOP_K=5
RAG_SIMILARITY_THRESHOLD=0.5

# -----------------
# STT Configuration
# -----------------
# STT provider: whisper | vosk | google | azure
STT_PROVIDER=whisper

# Confidence threshold (0-1) - transcriptions below this trigger re-record prompt
STT_CONFIDENCE_THRESHOLD=0.7

# Google Cloud STT (optional)
GOOGLE_CLOUD_API_KEY=your-google-cloud-api-key-here

# Azure STT (optional)
AZURE_SPEECH_KEY=your-azure-speech-key-here
AZURE_SPEECH_REGION=eastus

# -----------------
# TTS Configuration
# -----------------
# TTS provider: gtts | coqui | azure | elevenlabs
TTS_PROVIDER=gtts

# gTTS settings
GTTS_LANG_DEFAULT=en
GTTS_CHUNK_SIZE=900

# Azure TTS (optional)
AZURE_TTS_KEY=your-azure-tts-key-here
AZURE_TTS_REGION=eastus
AZURE_TTS_VOICE_EN=en-US-JennyNeural
AZURE_TTS_VOICE_HI=hi-IN-SwaraNeural

# ElevenLabs TTS (optional)
ELEVENLABS_API_KEY=your-elevenlabs-api-key-here
ELEVENLABS_VOICE_ID=21m00Tcm4TlvDq8ikWAM

# -----------------
# Session & Memory
# -----------------
# Session store: memory | redis
SESSION_STORE=memory

# Redis connection (if SESSION_STORE=redis)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# Session timeout (seconds)
SESSION_TIMEOUT=3600

# Max conversation history to keep
MAX_CONVERSATION_HISTORY=20

# -----------------
# File Upload
# -----------------
# Max audio file size (bytes) - 10MB default
MAX_AUDIO_SIZE=10485760

# Allowed audio formats
ALLOWED_AUDIO_FORMATS=audio/wav,audio/mpeg,audio/mp3,audio/webm,audio/ogg

# Temporary file storage
TEMP_DIR=./temp

# -----------------
# Security
# -----------------
# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------
# Logging
# -----------------
# Log level: error | warn | info | debug
LOG_LEVEL=info

# Log format: combined | common | dev | short | tiny
LOG_FORMAT=dev

# -----------------
# Feature Flags
# -----------------
# Enable/disable features
ENABLE_TTS=true
ENABLE_STT=true
ENABLE_RAG=true
ENABLE_WEBSOCKET=true

# Require RAG sources for factual answers
REQUIRE_RAG_CITATIONS=true

# -----------------
# Audio Processing
# -----------------
# Path to ffmpeg binary (leave empty for system PATH)
FFMPEG_PATH=

# Audio output format
AUDIO_OUTPUT_FORMAT=mp3

# Audio bitrate
AUDIO_BITRATE=128k

# -----------------
# Development
# -----------------
# Enable debug mode with verbose logging
DEBUG=false

# Disable SSL verification (dev only - NEVER in production)
NODE_TLS_REJECT_UNAUTHORIZED=1
